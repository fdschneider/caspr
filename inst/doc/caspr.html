<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Florian D. Schneider" />

<meta name="date" content="2015-10-23" />

<title>caspr: Cellular Automata for Spatial Pressure in R</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link href="data:text/css,body%20%7B%0A%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20max%2Dwidth%3A%20700px%3B%0A%20%20overflow%3A%20visible%3B%0A%20%20padding%2Dleft%3A%202em%3B%0A%20%20padding%2Dright%3A%202em%3B%0A%20%20font%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0A%20%20font%2Dsize%3A%2014px%3B%0A%20%20line%2Dheight%3A%201%2E35%3B%0A%7D%0A%0A%23header%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0A%23TOC%20%7B%0A%20%20clear%3A%20both%3B%0A%20%20margin%3A%200%200%2010px%2010px%3B%0A%20%20padding%3A%204px%3B%0A%20%20width%3A%20400px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20border%2Dradius%3A%205px%3B%0A%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20font%2Dsize%3A%2013px%3B%0A%20%20line%2Dheight%3A%201%2E3%3B%0A%7D%0A%20%20%23TOC%20%2Etoctitle%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%20%20font%2Dsize%3A%2015px%3B%0A%20%20%20%20margin%2Dleft%3A%205px%3B%0A%20%20%7D%0A%0A%20%20%23TOC%20ul%20%7B%0A%20%20%20%20padding%2Dleft%3A%2040px%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D1%2E5em%3B%0A%20%20%20%20margin%2Dtop%3A%205px%3B%0A%20%20%20%20margin%2Dbottom%3A%205px%3B%0A%20%20%7D%0A%20%20%23TOC%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dleft%3A%20%2D2em%3B%0A%20%20%7D%0A%20%20%23TOC%20li%20%7B%0A%20%20%20%20line%2Dheight%3A%2016px%3B%0A%20%20%7D%0A%0Atable%20%7B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dcolor%3A%20%23DDDDDD%3B%0A%20%20border%2Dstyle%3A%20outset%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0A%20%20border%2Dwidth%3A%202px%3B%0A%20%20padding%3A%205px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%20%20line%2Dheight%3A%2018px%3B%0A%20%20padding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0A%20%20border%2Dleft%2Dstyle%3A%20none%3B%0A%20%20border%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Ap%20%7B%0A%20%20margin%3A%200%2E5em%200%3B%0A%7D%0A%0Ablockquote%20%7B%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20padding%3A%200%2E25em%200%2E75em%3B%0A%7D%0A%0Ahr%20%7B%0A%20%20border%2Dstyle%3A%20solid%3B%0A%20%20border%3A%20none%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23777%3B%0A%20%20margin%3A%2028px%200%3B%0A%7D%0A%0Adl%20%7B%0A%20%20margin%2Dleft%3A%200%3B%0A%7D%0A%20%20dl%20dd%20%7B%0A%20%20%20%20margin%2Dbottom%3A%2013px%3B%0A%20%20%20%20margin%2Dleft%3A%2013px%3B%0A%20%20%7D%0A%20%20dl%20dt%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%7D%0A%0Aul%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%7D%0A%20%20ul%20li%20%7B%0A%20%20%20%20list%2Dstyle%3A%20circle%20outside%3B%0A%20%20%7D%0A%20%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%20%20%7D%0A%0Apre%2C%20code%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20color%3A%20%23333%3B%0A%7D%0Apre%20%7B%0A%20%20white%2Dspace%3A%20pre%2Dwrap%3B%20%20%20%20%2F%2A%20Wrap%20long%20lines%20%2A%2F%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20margin%3A%205px%200px%2010px%200px%3B%0A%20%20padding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Acode%20%7B%0A%20%20font%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0A%20%20font%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0A%20%20padding%3A%202px%200px%3B%0A%7D%0A%0Adiv%2Efigure%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0A%20%20background%2Dcolor%3A%20%23FFFFFF%3B%0A%20%20padding%3A%202px%3B%0A%20%20border%3A%201px%20solid%20%23DDDDDD%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20margin%3A%200%205px%3B%0A%7D%0A%0Ah1%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%20%20font%2Dsize%3A%2035px%3B%0A%20%20line%2Dheight%3A%2040px%3B%0A%7D%0A%0Ah2%20%7B%0A%20%20border%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20padding%2Dbottom%3A%202px%3B%0A%20%20font%2Dsize%3A%20145%25%3B%0A%7D%0A%0Ah3%20%7B%0A%20%20border%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20font%2Dsize%3A%20120%25%3B%0A%7D%0A%0Ah4%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0A%20%20margin%2Dleft%3A%208px%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Ah5%2C%20h6%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23ccc%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Aa%20%7B%0A%20%20color%3A%20%230033dd%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%20%20a%3Ahover%20%7B%0A%20%20%20%20color%3A%20%236666ff%3B%20%7D%0A%20%20a%3Avisited%20%7B%0A%20%20%20%20color%3A%20%23800080%3B%20%7D%0A%20%20a%3Avisited%3Ahover%20%7B%0A%20%20%20%20color%3A%20%23BB00BB%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%0A%2F%2A%20Class%20described%20in%20https%3A%2F%2Fbenjeffrey%2Ecom%2Fposts%2Fpandoc%2Dsyntax%2Dhighlighting%2Dcss%0A%20%20%20Colours%20from%20https%3A%2F%2Fgist%2Egithub%2Ecom%2Frobsimmons%2F1172277%20%2A%2F%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Keyword%20%2A%2F%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%2F%2A%20DataType%20%2A%2F%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%2F%2A%20DecVal%20%28decimal%20values%29%20%2A%2F%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20BaseN%20%2A%2F%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Float%20%2A%2F%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Char%20%2A%2F%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20String%20%2A%2F%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%2F%2A%20Comment%20%2A%2F%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%2F%2A%20OtherToken%20%2A%2F%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20AlertToken%20%2A%2F%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Function%20calls%20%2A%2F%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%2F%2A%20ErrorTok%20%2A%2F%0A%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div id="header">
<h1 class="title">caspr: Cellular Automata for Spatial Pressure in R</h1>
<h4 class="author"><em>Florian D. Schneider</em></h4>
<h4 class="date"><em>2015-10-23</em></h4>
</div>


<div id="general-information" class="section level1">
<h1>General information</h1>
<p>The caspr package is running spatial disturbance models in a cellular automata framework. This is part of a collaborative project between the group of <a href="http://sonia.kefi.fr/">Sonia Kéfi</a> (Institut de Sciences d’Evolution, CNRS, IRD, Université Montpellier, France) and <a href="https://teelabiisc.wordpress.com/">Vishwesha Guttal</a> (Center for Ecological Sciences, Indian Institute of Science, Bangalore, India).</p>
<div id="contributors" class="section level2">
<h2>Contributors</h2>
<p>Alain Danet, Alex Genin, Vishwesha Guttal, Sonia Kefi, Sabiha Majumder, Sumithra Sankaran, <a href="mailto:florian.schneider@univ-montp2.fr">Florian Schneider (Maintainer)</a></p>
</div>
<div id="version-and-package-home" class="section level2">
<h2>Version and package home</h2>
<p>The package is developed and distributed on Github. Source code is found at <a href="https://github.com/fdschneider/caspr"><a href="https://github.com/fdschneider/caspr">https://github.com/fdschneider/caspr</a></a>. <a href="https://github.com/fdschneider/caspr/releases/tag/v0.1.7">Current release is v0.1.7</a>. Please report bugs on the <a href="https://github.com/fdschneider/caspr/issues">package issue tracker</a> and contribute fixes or new model definitions via pull requests!</p>
</div>
<div id="install-package" class="section level2">
<h2>Install package</h2>
<p>The package can be installed directly from GitHub using the <code>devtools</code> package.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)
devtools::<span class="kw">install_github</span>(<span class="st">&quot;fdschneider/caspr&quot;</span>)</code></pre>
<p>Then, to load the package in your current session, type</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(caspr)</code></pre>
<pre><code>## 
## Attaching package: 'caspr'
## 
## Das folgende Objekt ist maskiert durch '.GlobalEnv':
## 
##     animate</code></pre>
</div>
<div id="license" class="section level2">
<h2>License</h2>
<p>The MIT License (MIT)</p>
<p>Copyright (c) 2015 the authors</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div>
</div>
<div id="cellular-automata" class="section level1">
<h1>Cellular automata</h1>
<p>(general introduction to CA models)</p>
</div>
<div id="package-description" class="section level1">
<h1>Package description</h1>
<p>The R-package is build around objects of a particular class <code>ca_model</code> (S3 objects in R) that contain all the model specific information, like the original publication, the update functions, and the cell states. These objects can be handled by a function called <code>ca()</code> which runs the cellular automata over time. Other functions allow the plotting of single snapshots or timeseries, the generation of initial lattices/grids/landscapes, the calculation of spatial and temporal indicators as provided by the package <a href="https://github.com/fdschneider/spatial_warnings">‘spatialwarnings’</a>.</p>
<p>In the following the objects and functions are described in a (somewhat) logical sequence of usage.</p>
<div id="landscape-objects" class="section level2">
<h2>Landscape objects</h2>
<p>Cellular automata are lattice- or grid-based systems, where neighboring cells on the lattice are affecting each others transition rules. Those lattices are termed ‘landscapes’ within the framework of ‘caspr’ and are stored in objects of class <code>&quot;landscape&quot;</code>.</p>
<div id="generate-landscape-objects" class="section level3">
<h3>Generate landscape objects</h3>
<p>Landscape objects are created using the function <code>init_landscape()</code> , e.g.</p>
<pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">init_landscape</span>(<span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;0&quot;</span>), <span class="kw">c</span>(<span class="fl">0.2</span>,<span class="fl">0.8</span>), <span class="dt">width =</span> <span class="dv">100</span>)</code></pre>
<p>Landscapes are squared by default, but a height argument can be specified optionally. However, doing so <strong>might disqualify the output to be spatially analysed!!!</strong></p>
<p>A landscape object is a list <code>l</code> of class <code>&quot;landscape&quot;</code> that contains</p>
<ul>
<li><code>l$dim</code> : a named vector of the default form <code>c(width = 50, height = 50)</code></li>
<li><code>l$cells</code> : a factorial vector of length <code>prod(l$dims)</code> that contains the state that each cell of the landscape matrix is in (row-wise from top to bottom).</li>
</ul>
</div>
<div id="transfer-to-matrix" class="section level3">
<h3>Transfer to Matrix</h3>
<p>The vectorial storage of the grid is allowing for a more efficient memory use and evaluation than with matrices, using map vectors that are provided as global variables by executing <code>mapping(l$dims[1], l$dims[2])</code>.</p>
<p>For compatibility the landscape object can be translated into a matrix using <code>as.matrix(l)</code>. Any matrix <code>L</code> of <em>factorial</em> content can be reverted into a landscape object using <code>as.landscape(L, states)</code>. Ensure that the factors occuring in the matrix match the factor levels provided in the argument states, which is used to set the order of the states in the resulting landscape object (order is important in the further process!).</p>
</div>
<div id="binary-matrix-for-spatial-analysis" class="section level3">
<h3>Binary matrix for spatial analysis</h3>
<p>The function <code>as.binary_matrix()</code> provides compatibility with the package <a href>‘spatialwarnings’</a> for spatial analysis of spatial patterns. By default the function assumes the primary cell state to be transferred into binary value <code>TRUE</code>, while all other states are set to <code>FALSE</code>. The parameter <code>is</code> specifies the state or a vector of states that should be set to <code>TRUE</code> in the resulting binary matrix.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(spatialwarnings)

L &lt;-<span class="st"> </span><span class="kw">as.binary_matrix</span>(l)
L_gap &lt;-<span class="st"> </span><span class="kw">as.binary_matrix</span>(l, <span class="dt">is =</span> <span class="kw">c</span>(<span class="st">&quot;0&quot;</span>,<span class="st">&quot;-&quot;</span>))

<span class="kw">spatialwarnings</span>(L)</code></pre>
</div>
<div id="plot-and-summarize-output" class="section level3">
<h3>Plot and summarize output</h3>
<p>Specific method for functions <code>plot</code>, <code>summary</code> and <code>print</code> do exist, which means the following calls will produce an optimized output:</p>
<pre class="sourceCode r"><code class="sourceCode r">l
<span class="kw">summary</span>(l)
<span class="kw">plot</span>(l)</code></pre>
<p>Also, a method for ggplot2 function <code>fortify()</code> exists which allows you to plot landscape objects via</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(ggplot2)

<span class="kw">ggplot</span>(<span class="kw">fortify</span>(l)) +
<span class="st">  </span><span class="kw">geom_raster</span>(<span class="kw">aes</span>(x,y,<span class="dt">fill=</span>state)) +
<span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span>grazing$cols)</code></pre>
</div>
</div>
<div id="model-objects" class="section level2">
<h2>Model objects</h2>
<p>A model object is a list <code>model</code> of class <code>&quot;ca_model&quot;</code> that contains</p>
<ul>
<li><code>model$name</code>: the name of the model</li>
<li><code>model$ref</code>: the original reference</li>
<li><code>model$states</code>: the potential cell states. Order does matter: The first entry is considered a ‘primary’ or ‘focus’ cell state in downstream functions (e.g. for plotting of timeseries).</li>
<li><code>model$cols</code>: colors for cell states</li>
<li><code>model$interact</code> : an interaction matrix, defaults to 4-cell neighborhood. This affects behaviour of the <code>count()</code> function, if this is required in the update function.</li>
<li><code>model$parms</code>: a set of default parameters that also serves as a template to check for completeness of custom parameters.<br /></li>
<li><code>model$update</code>: the update function, which takes a landscape object <code>x_old</code> and returns a landscape object <code>x_new</code>, representing the updating of one single timestep (e.g. one year, one season).</li>
</ul>
<p>Other functions or static parameters can be provided as further objects to the list. But those listed above are mandatory. In the current version of <em>caspr</em>, the objects of class <code>ca_model</code> are not created by a function, but provided manually as custom R objects. If you add a model then start development from <code>model_template.R</code>! Before running <code>ca(l, yourmodel)</code> you should test the update function for valid output and optimize for evaluation speed!</p>
<p>A method <code>print.ca_model</code> exists which allows to review a model’s specifications simply by calling the model object in R, e.g. <code>grazing</code> returns.</p>
<pre><code>## 
##  Spatial Grazing Model 
##  ---------------------
## 
##  Possible cell states:  +, 0, - 
## 
##  Required parameters and default values: 
##    del = 0.9
##    b = 0.5
##    c_ = 0.2
##    m0 = 0.05
##    g = 0.2
##    r = 0.01
##    f = 0.9
##    d = 0.1
##    p = 1
## 
##  Original reference: Schneider and Kefi 2015, in review</code></pre>
<p>It is envisioned to provide a function that helps generating the backbone of a new model object.</p>
</div>
<div id="running-models-function-ca" class="section level2">
<h2>Running models: function <code>ca()</code></h2>
<p>The function <code>ca(x, model, parms)</code> runs a cellular automata simulation starting from the landscape object provided in <code>x</code> and using the update function provided by <code>model</code> with the parameter set <code>parms</code> (a list of parameters). Before running the model, the function validates the parameter set provided against the template stored in <code>model$parms</code>.</p>
<p>Further parameters are available to adjust the timespan run and the snapshots of the landscape saved.</p>
<pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">init_landscape</span>(<span class="kw">c</span>(<span class="st">&quot;+&quot;</span>, <span class="st">&quot;0&quot;</span>, <span class="st">&quot;-&quot;</span>), <span class="kw">c</span>(<span class="fl">0.2</span>,<span class="fl">0.7</span>,<span class="fl">0.1</span>))
p &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">d =</span> <span class="fl">0.4</span>, <span class="dt">r =</span> <span class="fl">0.2</span>, <span class="dt">delta =</span> <span class="fl">0.4</span>) 
r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, musselbed, p)</code></pre>
<p>By default, simulations run for 200 timesteps and then terminate. This can be modified by setting the <code>t_max</code> parameter to a lower or higher value.</p>
<pre class="sourceCode r"><code class="sourceCode r">r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, musselbed, p, <span class="dt">t_max =</span> <span class="dv">500</span>)</code></pre>
<p>After simulation, the function returns an object of class <code>ca_results</code>. The result object <code>r</code> would have the structure:</p>
<ul>
<li><code>r$model</code>: the <code>ca_model</code> object used to run the simulation, including the provided parameter set.</li>
<li><code>r$time</code>: a vector of the distinct timesteps of the simulation</li>
<li><code>r$issteady</code>: Binary vector reporting for each timestep if the criterion for steady state was fulfilled. The criterion can be customized by adjusting parameter <code>steady</code> (see below).</li>
<li><code>r$cover</code>: a data frame reporting the global cover with one column for each state of the model and one row for each timestep. Thus, <code>r$cover[1]</code> returns the timeseries of the primary cell state.</li>
<li><code>r$local</code>: a data frame reporting the average local cover of the cell states, i.e. the average probability that a state <em>i</em> is found in the neighborhood given that the focal cell is in state <em>i</em>. Thus, <code>r$local[1]</code> returns the timeseries of the primary cell state.</li>
<li><code>r$snaps</code>: a vector of times at which snapshots were taken.</li>
<li><code>r$landscapes</code>: a list of landscape objects for the given snapshots.</li>
</ul>
<p>Thus the result of a simulation contains two major types of output:</p>
<ol style="list-style-type: decimal">
<li>the full timeseries of cover of each state (<code>r$cover</code>), as well as a timeseries of the average local cover (<code>r$local</code>).</li>
<li>selected snapshots of the full landscape (<code>r$landscapes</code>). By default each timestep is stored (see below).</li>
</ol>
<div id="define-frequency-of-snapshots" class="section level3">
<h3>define frequency of snapshots</h3>
<p>The output object contains a list object <code>r$landscapes</code> which contains individual snapshots of the landscapes, by default taken each full timestep. The parameter <code>saveeach</code> reduces the frequency of snapshots to be saved in the output object. This is usefull to reduce size of the output objects or to produce time-lapse videos with the <code>ca_animate()</code> function.</p>
<p>The following would only save the initial and final landscape.</p>
<pre class="sourceCode r"><code class="sourceCode r">r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, musselbed, p, <span class="dt">t_max =</span> <span class="dv">500</span>, <span class="dt">saveeach =</span> <span class="dv">500</span>)</code></pre>
</div>
<div id="define-auto-stop-function" class="section level3">
<h3>define auto-stop function</h3>
<p>Alternatively to running the simulations until <code>t_max</code> is reached, the function <code>ca()</code> can automatically terminate the simulation if steady state is reached. The switch <code>stopifsteady = TRUE</code> activates this option and applies the default criterion for steady state, which is comparing the mean cover of the primary cell state in two subsequent periods of time. The simulation terminates if the difference in means is below a threshold value.</p>
<p><strong>(This method is still problematic and needs to be refined!)</strong></p>
</div>
<div id="realised-timesteps" class="section level3">
<h3>realised timesteps</h3>
<p>The update functions of the models are defined to represent a full timestep. What that means depends on the model specifications. It can be one year, a day or any particular timespan that the model parameters refer to. However, the computational implementation of one update cycle is model specific.</p>
<p>For instance the predator–prey model applies an asynchronous updating, i.e. within each annual timestep, <code>width</code> <span class="math">\(\times\)</span> <code>height</code> random cells are updated, allowing for repeated draws. Each cell has the fair chance to be updated, but no guarantee. Thus, no substeps in that sense are implemented, but they could be.</p>
<p>The grazing model has synchronous updating and each timestep is implemented as <code>subs</code> substeps. Within each substep, only a fraction of the annual transition probability is applied. The default value here is set in the model specifications, but it can be provided by the <code>ca()</code> function as an argument that is handed over to the update function call. For instance, you can run the grazing model with 12 instead of the default 10 substeps by calling:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ca</span>(l , <span class="dt">model =</span> grazing, <span class="dt">parms =</span> p, <span class="dt">subs =</span> <span class="dv">12</span>)</code></pre>
<p>In any case only the full annual timestep is returned to the <code>ca()</code> function.</p>
</div>
</div>
<div id="function-ca_array" class="section level2">
<h2>function <code>ca_array()</code></h2>
<p>The package includes a wrapper function <code>ca_array()</code> that runs repeated model simulations along a gradient of one parameter value or an array of parameter values. This function makes use of a parallel backend, e.g. provided by the <code>foreach</code> package. The initial landscape is drawn for each replicate using the numerical vector of initial cover provided in <code>init</code>.</p>
<p>Make sure to adapt the type of parallel backend to your computer infrastructure (see <a href="https://cran.r-project.org/web/packages/foreach/vignettes/foreach.pdf">package vignette of the foreach -package</a>).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># provides parallel backend</span>
<span class="kw">library</span>(foreach)
<span class="kw">library</span>(doSNOW)
 
cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="kw">rep</span>(<span class="st">&quot;localhost&quot;</span>, <span class="dv">10</span>), <span class="dt">type =</span> <span class="st">&quot;SOCK&quot;</span>)

p &lt;-<span class="st"> </span><span class="kw">list</span>(
    <span class="dt">r =</span> <span class="fl">0.4</span>, <span class="co"># recolonisation of empty sites dependent on local density</span>
    <span class="dt">d =</span> <span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.1</span>), <span class="co"># wave disturbance</span>
    <span class="dt">delta =</span> <span class="fl">0.01</span>, <span class="co"># intrinsic disturbance rate</span>
    <span class="dt">replicates =</span> <span class="dv">1</span>:<span class="dv">5</span>
  )
r &lt;-<span class="st"> </span><span class="kw">ca_array</span>(musselbed, <span class="dt">init =</span> <span class="kw">c</span>(<span class="fl">0.7</span>,<span class="fl">0.15</span>,<span class="fl">0.15</span>), <span class="dt">parms =</span> p)

<span class="kw">stopCluster</span>(cl)</code></pre>
<p>The function returns a dataframe with global and local cover for each state for each parameter value or combination of parameter values given in <code>parms</code>.</p>
<p>Parameters specifying the behaviour of each model run can be provided as optional parameters and will be handed to function <code>ca()</code> (e.g. <code>t_max</code> or a custom stability criterion).</p>
<div id="save-output-to-files" class="section level3">
<h3>Save output to files</h3>
<p>Optionally, the individual model run outputs will be saved to ‘.Rd’ files if parameter <code>save = TRUE</code> is set. The <code>filename</code> parameter can be used to specify a relative path and filename root, which will be extended by an individual counter.</p>
<pre class="sourceCode r"><code class="sourceCode r">r &lt;-<span class="st"> </span><span class="kw">ca_array</span>(musselbed, <span class="dt">init =</span> <span class="kw">c</span>(<span class="fl">0.7</span>,<span class="fl">0.15</span>,<span class="fl">0.15</span>), <span class="dt">parms =</span> p,
              <span class="dt">save =</span> <span class="ot">TRUE</span>, <span class="dt">filename =</span> <span class="st">&quot;output/musselbed&quot;</span>)</code></pre>
<p><strong>Note:</strong> If running in parallel on a cluster, output files will be saved in the workers home directory!</p>
</div>
<div id="random-number-seeds" class="section level3">
<h3>Random number seeds</h3>
<p>The function <code>ca_array()</code> sets the seed for random number generation for each iteration in the parameter array. The seeds of each initial run will be reported in the output table. To make things reproducible, it initiates the seeds of the array using a random number generator that is seeded to a value provided in the parameter <code>salt</code>. Thus, two runs of <code>ca_array()</code> that are supposed to differ from one another run must receive their own grain of salt.</p>
<pre class="sourceCode r"><code class="sourceCode r">r1 &lt;-<span class="st"> </span><span class="kw">ca_array</span>(musselbed, <span class="dt">init =</span> <span class="kw">c</span>(<span class="fl">0.7</span>,<span class="fl">0.15</span>,<span class="fl">0.15</span>), <span class="dt">parms =</span> p, <span class="dt">salt =</span> <span class="dv">378539</span>)
r2 &lt;-<span class="st"> </span><span class="kw">ca_array</span>(musselbed, <span class="dt">init =</span> <span class="kw">c</span>(<span class="fl">0.7</span>,<span class="fl">0.15</span>,<span class="fl">0.15</span>), <span class="dt">parms =</span> p, <span class="dt">salt =</span> <span class="dv">745283</span>)</code></pre>
</div>
</div>
<div id="function-ca_animate" class="section level2">
<h2>function <code>ca_animate()</code></h2>
<p>To visualize simulation runs the function <code>ca_animate()</code> provides a wrapper that generates an animated gif (default) or video of the landscapes development over time. The function requires the <a href="http://yihui.name/animation/">‘animation’ package</a>, which uses ‘ImageMagick’ to convert the multiples into an animated gif or ‘ffmpg’ to convert into a video. Make sure that <a href="http://imagemagick.org/">ImageMagick</a> and/or ffmpg are installed and properly found by the animation package functions (see ?saveGIF). The animated gifs are tiny and represent one landscape cell per pixel. Use an image viewer that scales images without aliasing to view the animated gif at larger size.</p>
<p>The type of video generated can be specified by the <code>type</code> argument which can be <code>mp4</code>, <code>wmv</code> or <code>avi</code>. So far, <code>mp4</code> produces the nicest output.</p>
<pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">init_landscape</span>(musselbed$states, <span class="dt">cover =</span> <span class="kw">c</span>(<span class="fl">0.3</span>,<span class="fl">0.2</span>,<span class="fl">0.5</span>), <span class="dt">width =</span> <span class="dv">100</span>)
r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, musselbed,  <span class="dt">t_max =</span> <span class="dv">40</span>)

<span class="kw">ca_animate</span>(r, <span class="dt">filename =</span> <span class="st">&quot;musselbed&quot;</span>)
<span class="kw">ca_animate</span>(r, <span class="dt">filename =</span> <span class="st">&quot;musselbed&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;mp4&quot;</span>)</code></pre>
<p>Note that the parameter <code>saveeach</code> in <code>ca()</code> can be used to produce timelapse effects.</p>
<pre class="sourceCode r"><code class="sourceCode r">r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, musselbed,  <span class="dt">t_max =</span> <span class="dv">200</span>, <span class="dt">saveeach =</span> <span class="dv">3</span>)
<span class="kw">ca_animate</span>(r, <span class="dt">filename =</span> <span class="st">&quot;musselbed&quot;</span>, <span class="dt">speed =</span> <span class="fl">0.8</span>)</code></pre>
<p>Additionally, the speed of the output video or animation can be adjusted by setting the relative <code>speed</code> parameters (defaults to <code>speed = 1</code>).</p>
<p>By default, output is saved in current working directory. The parameter <code>directory</code> allows specifying any relative or absolute target path.</p>
</div>
</div>
<div id="model-descriptions" class="section level1">
<h1>Model descriptions</h1>
<p>A set of spatially-explicit cellular automata is provided with caspr. They have in common that a spatially explicit stress is acting on the focal cell state, for instance by increasing mortality if predators or gaps in the canopy are present or by reducing mortality by associational growth.<br />We also added Conway’s Game of Life as a test case for animation functions – and for fun.</p>
<div id="mussel-bed-model" class="section level2">
<h2>Mussel bed model</h2>
<div id="example" class="section level3">
<h3>Example</h3>
</div>
<div id="source-and-references" class="section level3">
<h3>Source and References</h3>
</div>
</div>
<div id="forest-gap-model" class="section level2">
<h2>Forest Gap model</h2>
<p>Dynamic model for forest pattern after recurring wind disturbance with two cell states: empty (<code>&quot;0&quot;</code>) and vegetated (<code>&quot;+&quot;</code>).</p>
<p>This model can use either an explicit height for trees, in which case states can be anywhere in a range [<span class="math">\(S_min ... S_max\)</span>] (Solé et al., 1995), or use only two states, vegetated (non-gap) and empty (gap) (Kubo et al., 1996). Here we focus on the version that uses only two states: gap (<code>&quot;0&quot;</code>) and non-gap (<code>&quot;+&quot;</code>). Without spatial spreading of disturbance (all cells are independent), a cell transitions from empty to vegetated with a birth probability b and fromvegetated to empty with death probability d.</p>
<p>However, gap expansion occurs in nature as trees having empty (non-vegetated) surroundings are more likely to fall due to disturbance (e.g. wind blows). Let <span class="math">\(p(0)\)</span> be the proportion of neighbouring sites that are gaps. We can implement this expansion effect by substituting the death rate</p>
<p><span class="math">\[ d = d_0 + \delta p_0 \,.\]</span></p>
<p>Since <span class="math">\(0\leq p(0) \leq 1\)</span>, delta represents the maximal added death rate due to gap expansion (i.e. the spatial component intensity).</p>
<p>The authors consider two cases: one in which the recovery of trees is proportional to the global density of vegetated sites, and one where the recovery is proportional to the local density of vegetation. We use only the first case as it the only one producing bistability.</p>
<p>The birth rate <span class="math">\(b\)</span> is substituted with</p>
<p><span class="math">\[ b = \alpha \rho_+ \,,\]</span></p>
<p>where <span class="math">\(\rho_+\)</span> represents the global density of non-gap sites and <span class="math">\(\alpha\)</span> is a positive constant. This can produce alternative stable states over a range of <span class="math">\(\delta\)</span> values within 0.15–0.2 (<span class="math">\(\alpha\)</span> is fixed to 0.20 and <span class="math">\(d\)</span> to 0.01).</p>
<p>In their original simulations, the authors of the model (Kubo et al. 1996) use a <span class="math">\(100\times100\)</span>-torus-type lattice (with random initial covers?).</p>
<div id="example-1" class="section level3">
<h3>Example</h3>
<pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">init_landscape</span>(<span class="kw">c</span>(<span class="st">&quot;+&quot;</span>,<span class="st">&quot;0&quot;</span>), <span class="kw">c</span>(<span class="fl">0.6</span>,<span class="fl">0.4</span>), <span class="dt">width =</span> <span class="dv">100</span>) <span class="co"># create initial landscape</span>
p &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">delta =</span> <span class="fl">0.2</span>, <span class="dt">d =</span> <span class="fl">0.01</span>)   <span class="co"># set parameters</span>
r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, <span class="dt">model =</span> forestgap, <span class="dt">parms =</span> p, <span class="dt">t_max =</span> <span class="dv">50</span>)    <span class="co"># run simulation</span>
r
<span class="kw">plot</span>(r)</code></pre>
</div>
<div id="original-reference" class="section level3">
<h3>Original reference</h3>
<p>Kubo, T. et al. (1996) Forest spatial dynamics with gap expansion: total gap area and gap size distribution. J. Theor. Biol. 180, 229246, <a href="http://dx.doi.org/10.1006/jtbi.1996.0099">doi: 10.1006/jtbi.1996.0099</a></p>
</div>
</div>
<div id="predator-prey-model" class="section level2">
<h2>Predator-prey model</h2>
<p>A spatially explicit predator prey model with three potential cell states: Occupied by prey (fish, <code>&quot;f&quot;</code>), occupied by predators (sharks, <code>&quot;s&quot;</code>) and empty (<code>&quot;0&quot;</code>).</p>
<p>The particular neighbourhood considered in the simulations consists of the four nearest sites. Prey growth occurs as a contact process: a prey chooses a neighbouring site at random and gives birth to another prey if this site is empty at a birth rate <span class="math">\(\beta_f\)</span>. Predators hunt for prey by inspecting their neighbourhood for the presence of prey at rate <span class="math">\(\beta_s = 1\)</span>. If prey are present in the nearest neighborhood, the predator selects one at random and eats it, moving to this neighbouring site. Only predators that find a prey can reproduce, and do so with a specified probability, <span class="math">\(\beta_s\)</span>. The offspring is placed in the original site of the predator. Predators that do not find prey are susceptible to starvation and die with a probability <span class="math">\(\delta\)</span>. Random movement occurs through mixing: neighbouring sites exchange state at a constant rate <span class="math">\(\nu\)</span>.</p>
<div id="example-2" class="section level3">
<h3>Example</h3>
<pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">init_landscape</span>(<span class="kw">c</span>(<span class="st">&quot;f&quot;</span>,<span class="st">&quot;s&quot;</span>,<span class="st">&quot;0&quot;</span>), <span class="kw">c</span>(<span class="fl">0.3</span>,<span class="fl">0.2</span>,<span class="fl">0.5</span>), <span class="dt">width =</span> <span class="dv">100</span>) <span class="co"># create initial landscape</span>
p &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">betaf =</span> <span class="fl">0.01</span>, <span class="dt">betas =</span> <span class="fl">0.1</span>, <span class="dt">delta =</span><span class="fl">0.2</span>)   <span class="co"># set parameters</span>
r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, <span class="dt">model =</span> predprey, <span class="dt">parms =</span> p, <span class="dt">t_max =</span> <span class="dv">50</span>)    <span class="co"># run simulation </span>
r
<span class="kw">plot</span>(r)

<span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))
<span class="kw">plot</span>(r$landscapes[[<span class="dv">1</span>]], <span class="dt">main =</span> <span class="st">&quot;t = 0&quot;</span>)
<span class="kw">plot</span>(r$landscapes[[<span class="dv">11</span>]], <span class="dt">main =</span> <span class="st">&quot;t = 10&quot;</span>)
<span class="kw">plot</span>(r$landscapes[[<span class="dv">21</span>]], <span class="dt">main =</span> <span class="st">&quot;t = 20&quot;</span>)
<span class="kw">plot</span>(r$landscapes[[<span class="dv">31</span>]], <span class="dt">main =</span> <span class="st">&quot;t = 30&quot;</span>)
<span class="kw">plot</span>(r$landscapes[[<span class="dv">41</span>]], <span class="dt">main =</span> <span class="st">&quot;t = 40&quot;</span>)</code></pre>
</div>
<div id="original-reference-1" class="section level3">
<h3>Original reference</h3>
<p>Pascual, M., Roy, M., Guichard, F., &amp; Flierl, G. (2002). Cluster size distributions: signatures of self-organization in spatial ecologies. Philosophical Transactions of the Royal Society of London. Series B, Biological Sciences, 357(1421), 657–666. <a href="https://doi.org/10.1098/rstb.2001.0983">doi: 10.1098/rstb.2001.0983</a></p>
</div>
</div>
<div id="grazing-model" class="section level2">
<h2>Grazing model</h2>
<p>The model builds upon a published model by Kefi et al. (2007). Spatial models of vegetation cover so far have considered grazing mortality a rather constant pressure, affecting all plants equally, regardless of their position in space. In the known models it usually adds as a constant to the individual plant risk (Kefi et al. 2007). However, grazing has a strong spatial component: Many plants in rangelands invest in protective structures such as thorns or spines, or develop growth forms that reduce their vulnerability to grazing. Therefore, plants growing next to each other benefit from the protection of their neighbors.</p>
<p>Such <strong>associational resistance</strong> is widely acknowledged in vegetation ecology but hardly integrated in models as a cause for spatially heterogenous grazing pressure. It also renders the plant mortality density dependent, which has important impacts on the bistability of the system.</p>
<p>The model investigates how the assumption of spatially heterogeneous pressure alters the bistability properties and the response of spatial indicators of catastrophic shifts.</p>
<p>The model knows three different cell states: occupied by vegetation <code>&quot;+&quot;</code>, empty but fertile <code>&quot;0&quot;</code> and degraded <code>&quot;-&quot;</code>. Transitions between cell states are only possible between vegetated and empty (by the processes of plant ‘death’ and ‘recolonization’) and between empty and degraded (by ‘degradation’ and ‘regeneration’).</p>
<p>To account for the spatially heterogeneous impacts of grazing due to associational resistance, we assumed that a plant’s vulnerability to grazers decreases with the proportion of occupied neighbors, <span class="math">\(q_{+|+}\)</span>. The individual probability of dying is therefore defined as</p>
<p><span class="math">\[w_{ \left\{ +,0 \right\} }  = m_0 + g_0 \left( 1 - q_{+|+} \right)\]</span></p>
<p>where the additional mortality due to grazing is maximized to <span class="math">\(g_0\)</span> if a plant has no vegetated neighbor (i.e., <span class="math">\(q_{+|+} = 0\)</span>) and gradually reduces to 0 with an increasing fraction of occupied neighbors, <span class="math">\(q_{+|+}\)</span>.</p>
<div id="example-3" class="section level3">
<h3>Example</h3>
<pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">init_landscape</span>(<span class="kw">c</span>(<span class="st">&quot;+&quot;</span>,<span class="st">&quot;0&quot;</span>,<span class="st">&quot;-&quot;</span>), <span class="kw">c</span>(<span class="fl">0.6</span>,<span class="fl">0.2</span>,<span class="fl">0.2</span>), <span class="dt">width =</span> <span class="dv">50</span>) <span class="co"># create initial landscape</span>
p &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">del =</span> <span class="fl">0.9</span>, <span class="dt">b =</span> <span class="fl">0.4</span>, <span class="dt">c_ =</span> <span class="fl">0.2</span>, <span class="dt">m0 =</span> <span class="fl">0.05</span>, <span class="dt">g =</span> <span class="fl">0.25</span>, <span class="dt">r =</span> <span class="fl">0.01</span>, <span class="dt">f =</span> <span class="fl">0.9</span>, <span class="dt">d =</span> <span class="fl">0.1</span>, <span class="dt">p =</span> <span class="dv">1</span>)   <span class="co"># set parameters</span>
r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, <span class="dt">model =</span> grazing, <span class="dt">parms =</span> p, <span class="dt">t_max =</span> <span class="dv">100</span>)    <span class="co"># run simulation </span></code></pre>
<p><img src="data:image/png;base64,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" /></p>
</div>
<div id="original-reference-2" class="section level3">
<h3>Original reference</h3>
<p>This model is unpublished yet, but inherits most assumptions from:</p>
<p>Kéfi, S., Rietkerk, M., van Baalen, M. &amp; Loreau, M. (2007). Local facilitation, bistability and transitions in arid ecosystems. Theoretical Population Biology, 71, 367379. <a href="http://dx.doi.org/10.1016/j.tpb.2006.09.003">doi: 10.1016/j.tpb.2006.09.003</a></p>
</div>
</div>
<div id="conways-game-of-life" class="section level2">
<h2>Conway’s Game of Life</h2>
<p>This is an implementation of the most popular cellular automata model ‘Life’. We added it to caspr for testing purposes.</p>
<p>The possible cell states are alive, <code>&quot;1&quot;</code>, and dead, <code>&quot;0&quot;</code>. The transition rules are deterministic:</p>
<ul>
<li>Any live cell with fewer than two live neighbours dies, as if caused by under-population.</li>
<li>Any live cell with two or three live neighbours lives on to the next generation.</li>
<li>Any live cell with more than three live neighbours dies, as if by overcrowding.</li>
<li>Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.</li>
</ul>
<div id="example-4" class="section level3">
<h3>Example</h3>
<pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">init_landscape</span>(<span class="kw">c</span>(<span class="st">&quot;1&quot;</span>,<span class="st">&quot;0&quot;</span>), <span class="kw">c</span>(<span class="fl">0.35</span>,<span class="fl">0.65</span>), <span class="dv">150</span>)
r &lt;-<span class="st"> </span><span class="kw">ca</span>(l, life, <span class="dt">t_max =</span> <span class="dv">100</span> )
<span class="kw">ca_animate</span>(r, <span class="dt">filename =</span> <span class="st">&quot;life&quot;</span>)</code></pre>
</div>
<div id="original-reference-3" class="section level3">
<h3>Original reference</h3>
<p>A detailled description can be found on [Wikipedia](<a href="https://en.wikipedia.org/wiki/Conway's_Game_of_Life">https://en.wikipedia.org/wiki/Conway's_Game_of_Life</a>). The first publication is:</p>
<p>Gardner, Martin (1970). Mathematical Games  The fantastic combinations of John Conway’s new solitaire game “life”. Scientific American 223. pp. 120123. ISBN 0-89454-001-7.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
